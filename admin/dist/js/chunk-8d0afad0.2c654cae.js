(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-8d0afad0"],{"28f1":function(t,e,r){"use strict";r.d(e,"a",(function(){return a}));r("99af"),r("4160"),r("b64b"),r("159b");function a(t){var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1],r=new FormData;return Object.keys(t).forEach((function(e){void 0!==t[e]&&null!==t[e]&&("picture"===e?+t[e].size>0&&r.append(e,t[e]):Array.isArray(t[e])?(0==t[e].length&&r.append(e,t[e]),t[e].forEach((function(t,a){r.append("".concat(e,"[").concat(a,"]"),t)}))):r.append(e,t[e]))})),e&&r.append("_method","put"),r}},e34f:function(t,e,r){"use strict";r.r(e);var a=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"app-content"},[r("h3",{staticClass:"app-content__title text-center"},[t._v("Blog's Categories")]),r("div",{staticClass:"mb-4"},[r("v-btn",{attrs:{color:"redMain",dark:"",elevation:4},on:{click:function(e){t.dialogCategory=!0}}},[t._v(" Add new category ")])],1),r("Table",{attrs:{headers:t.headers,body:t.$store.getters["postsCategories/formattedList"],"pagination-data":t.$store.state.postsCategories.pagination},on:{setCurrentPage:function(e){return t.getCategories(e)},editItem:t.editItem,deleteItem:t.deleteItem}}),r("v-dialog",{attrs:{value:t.dialogCategory,"max-width":"500px"},on:{input:function(e){return t.close()}}},[r("v-card",[r("v-card-title",[r("span",{staticClass:"headline"},[t._v(" "+t._s(t.$store.getters["postsCategories/formTitle"])+" ")])]),r("v-card-text",[r("v-form",{ref:"formCategory",attrs:{"lazy-validation":""},model:{value:t.formHasErrors,callback:function(e){t.formHasErrors=e},expression:"formHasErrors"}},[r("v-text-field",{staticClass:"mt-4",attrs:{value:t.$store.state.postsCategories.editedItem.name,label:"Category name",outlined:"",clearable:"",rules:[t.rules.required,t.rules.min3],required:""},on:{input:function(e){t.changeItem.name=e}}})],1)],1),r("v-card-actions",[r("v-spacer"),r("v-btn",{attrs:{color:"grey darken-1",text:""},on:{click:t.close}},[t._v("Cancel")]),r("v-btn",{attrs:{color:"green darken-1",text:""},on:{click:t.save}},[t._v("Save")])],1)],1)],1)],1)},s=[],o=(r("96cf"),r("1da1")),n=r("5530"),i=r("6fe7"),c=r("28f1"),u={name:"PostsFilter",components:{Table:i["a"]},computed:{_queryPage:function(){return+this.$route.query.page||1}},data:function(){return{headers:[{text:"#",sortable:!1,value:"idx"},{text:"Name",sortable:!0,value:"name",width:"100%"},{text:"Actions",sortable:!1,value:"actions",width:110,align:"center"}],dialogCategory:!1,changeItem:{name:""},slug:null,rules:{required:function(t){return!!t||"This field is required."},min3:function(t){return t&&t.length>=3||"This field must be more than 3 characters"}},formHasErrors:!0}},mounted:function(){this.getCategories(this._queryPage)},methods:{getCategories:function(t){var e=this;this.$store.dispatch("postsCategories/getList",t).catch((function(t){e.$store.commit("snackbar/OPEN_SNACKBAR",{type:"error",text:t})}))},editItem:function(t){this.$store.commit("postsCategories/SET_INDEX",t),this.$store.commit("postsCategories/SET_ITEM",t),this.changeItem=Object(n["a"])({},this.$store.state.postsCategories.editedItem),this.dialogCategory=!0},deleteItem:function(t){var e=this;return Object(o["a"])(regeneratorRuntime.mark((function r(){return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:e.slug=t.slug,e.$store.commit("modalConfirm/MODAL_SET_DATA"),e.$store.commit("modalConfirm/MODAL_HANDLER",!0);case 3:case"end":return r.stop()}}),r)})))()},save:function(){var t=this;return Object(o["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,t.$refs.formCategory.validate();case 2:if(!t.formHasErrors){e.next=5;break}return e.next=5,t.submit();case 5:case"end":return e.stop()}}),e)})))()},submit:function(){var t=this;return Object(o["a"])(regeneratorRuntime.mark((function e(){var r;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(!(t.$store.state.postsCategories.editedIndex>-1)){e.next=6;break}return r=Object(c["a"])(t.changeItem,!0),e.next=4,t.$store.dispatch("postsCategories/updateItem",r).then((function(e){"ok"===e.data.status&&(t.$store.commit("snackbar/OPEN_SNACKBAR",{type:"success",text:"Category successfully updated"}),t.getCategories(t._queryPage))})).catch((function(e){t.$store.commit("snackbar/OPEN_SNACKBAR",{type:"error",text:e})}));case 4:e.next=8;break;case 6:return e.next=8,t.$store.dispatch("postsCategories/createItem",t.changeItem).then((function(e){"ok"===e.data.status&&(t.$store.commit("snackbar/OPEN_SNACKBAR",{type:"success",text:"Category successfully created"}),t.getCategories(t._queryPage))})).catch((function(e){t.$store.commit("snackbar/OPEN_SNACKBAR",{type:"error",text:e})}));case 8:t.close();case 9:case"end":return e.stop()}}),e)})))()},close:function(){this.dialogCategory=!1,this.$store.commit("postsCategories/RESET_ITEM"),this.resetForm()},resetForm:function(){this.formHasErrors=!0,this.$refs.formCategory.reset()}},watch:{"$store.state.modalConfirm.action":function(t){var e=this;t&&(this.$store.dispatch("postsCategories/deleteItem",this.slug).then((function(t){"ok"===t.data.status&&(e.$store.commit("snackbar/OPEN_SNACKBAR",{type:"success",text:"Category successfully deleted"}),e.getCategories(e._queryPage))})).catch((function(t){e.$store.commit("snackbar/OPEN_SNACKBAR",{type:"error",text:t})})),this.$store.commit("modalConfirm/MODAL_HANDLER",!1),this.$store.commit("modalConfirm/MODAL_RESET"))}}},d=u,m=r("2877"),l=r("6544"),f=r.n(l),g=r("8336"),p=r("b0af"),h=r("99d9"),C=r("169a"),v=r("4bd4"),b=r("2fa4"),y=r("8654"),x=Object(m["a"])(d,a,s,!1,null,"3688af5d",null);e["default"]=x.exports;f()(x,{VBtn:g["a"],VCard:p["a"],VCardActions:h["a"],VCardText:h["b"],VCardTitle:h["c"],VDialog:C["a"],VForm:v["a"],VSpacer:b["a"],VTextField:y["a"]})}}]);
//# sourceMappingURL=chunk-8d0afad0.2c654cae.js.map