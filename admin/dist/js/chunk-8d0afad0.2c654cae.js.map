{"version":3,"sources":["webpack:///./src/js/global/get_form_data.js","webpack:///./src/js/pages/Blog/PostsCategories.vue?a6bc","webpack:///src/js/pages/Blog/PostsCategories.vue","webpack:///./src/js/pages/Blog/PostsCategories.vue?0b3d","webpack:///./src/js/pages/Blog/PostsCategories.vue"],"names":["getFormData","data","method","fd","FormData","Object","keys","forEach","item","undefined","size","append","Array","isArray","length","el","key","render","_vm","this","_h","$createElement","_c","_self","staticClass","_v","attrs","on","$event","dialogCategory","headers","$store","getters","state","postsCategories","pagination","getCategories","editItem","deleteItem","close","_s","ref","model","value","callback","$$v","formHasErrors","expression","editedItem","name","rules","required","min3","changeItem","save","staticRenderFns","components","Table","computed","_queryPage","$route","query","page","slug","mounted","methods","dispatch","catch","type","text","err","commit","resetForm","$refs","formCategory","reset","watch","next","then","res","status","component","VBtn","VCard","VCardActions","VCardText","VCardTitle","VDialog","VForm","VSpacer","VTextField"],"mappings":"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","file":"js/chunk-8d0afad0.2c654cae.js","sourcesContent":["export default function getFormData(data, method = false) {\n\tlet fd = new FormData();\n\n\tObject.keys(data).forEach(item => {\n\t\tif (data[item] === undefined || data[item] === null) return\n\n\t\tif (item === 'picture') {\n\t\t\tif (+data[item].size > 0) {\n\t\t\t\tfd.append(item, data[item])\n\t\t\t}\n\t\t} else if (Array.isArray(data[item])) {\n\t\t\tif (data[item].length == 0) fd.append(item, data[item])\n\t\t\tdata[item].forEach((el, key) => {\n\t\t\t\tfd.append(`${item}[${key}]`, el)\n\t\t\t})\n\t\t} else {\n\t\t\tfd.append(item, data[item])\n\t\t}\n\t})\n\n\tif (method) {\n\t\tfd.append('_method', 'put');\n\t}\n\n\treturn fd;\n}\n","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"app-content\"},[_c('h3',{staticClass:\"app-content__title text-center\"},[_vm._v(\"Blog's Categories\")]),_c('div',{staticClass:\"mb-4\"},[_c('v-btn',{attrs:{\"color\":\"redMain\",\"dark\":\"\",\"elevation\":4},on:{\"click\":function($event){_vm.dialogCategory = true}}},[_vm._v(\" Add new category \")])],1),_c('Table',{attrs:{\"headers\":_vm.headers,\"body\":_vm.$store.getters['postsCategories/formattedList'],\"pagination-data\":_vm.$store.state.postsCategories.pagination},on:{\"setCurrentPage\":function($event){return _vm.getCategories($event)},\"editItem\":_vm.editItem,\"deleteItem\":_vm.deleteItem}}),_c('v-dialog',{attrs:{\"value\":_vm.dialogCategory,\"max-width\":\"500px\"},on:{\"input\":function($event){return _vm.close()}}},[_c('v-card',[_c('v-card-title',[_c('span',{staticClass:\"headline\"},[_vm._v(\" \"+_vm._s(_vm.$store.getters['postsCategories/formTitle'])+\" \")])]),_c('v-card-text',[_c('v-form',{ref:\"formCategory\",attrs:{\"lazy-validation\":\"\"},model:{value:(_vm.formHasErrors),callback:function ($$v) {_vm.formHasErrors=$$v},expression:\"formHasErrors\"}},[_c('v-text-field',{staticClass:\"mt-4\",attrs:{\"value\":_vm.$store.state.postsCategories.editedItem.name,\"label\":\"Category name\",\"outlined\":\"\",\"clearable\":\"\",\"rules\":[_vm.rules.required, _vm.rules.min3],\"required\":\"\"},on:{\"input\":function($event){_vm.changeItem.name = $event}}})],1)],1),_c('v-card-actions',[_c('v-spacer'),_c('v-btn',{attrs:{\"color\":\"grey darken-1\",\"text\":\"\"},on:{\"click\":_vm.close}},[_vm._v(\"Cancel\")]),_c('v-btn',{attrs:{\"color\":\"green darken-1\",\"text\":\"\"},on:{\"click\":_vm.save}},[_vm._v(\"Save\")])],1)],1)],1)],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n  <div class=\"app-content\">\n    <h3 class=\"app-content__title text-center\">Blog's Categories</h3>\n\n    <div class=\"mb-4\">\n      <v-btn\n        color=\"redMain\"\n        dark\n        :elevation=\"4\"\n        @click=\"dialogCategory = true\"\n      >\n        Add new category\n      </v-btn>\n    </div>\n\n    <Table\n      :headers=\"headers\"\n      :body=\"$store.getters['postsCategories/formattedList']\"\n      :pagination-data=\"$store.state.postsCategories.pagination\"\n      @setCurrentPage=\"getCategories($event)\"\n      @editItem=\"editItem\"\n      @deleteItem=\"deleteItem\"\n    />\n\n    <v-dialog :value=\"dialogCategory\" @input=\"close()\" max-width=\"500px\">\n      <v-card>\n        <v-card-title>\n          <span class=\"headline\">\n            {{ $store.getters['postsCategories/formTitle'] }}\n          </span>\n        </v-card-title>\n\n        <v-card-text>\n          <v-form\n            ref=\"formCategory\"\n            v-model=\"formHasErrors\"\n            lazy-validation\n          >\n            <v-text-field\n              :value=\"$store.state.postsCategories.editedItem.name\"\n              @input=\"changeItem.name = $event\"\n              label=\"Category name\"\n              outlined\n              clearable\n              class=\"mt-4\"\n              :rules=\"[rules.required, rules.min3]\"\n              required\n            ></v-text-field>\n          </v-form>\n        </v-card-text>\n\n        <v-card-actions>\n          <v-spacer></v-spacer>\n          <v-btn color=\"grey darken-1\" text @click=\"close\">Cancel</v-btn>\n          <v-btn color=\"green darken-1\" text @click=\"save\">Save</v-btn>\n        </v-card-actions>\n      </v-card>\n    </v-dialog>\n\n  </div>\n</template>\n\n<script>\nimport Table from '@/js/components/tables/Table';\nimport getFormData from \"@/js/global/get_form_data\";\n\nexport default {\n  name: \"PostsFilter\",\n  components: {\n    Table\n  },\n  computed: {\n    _queryPage() {\n      return +this.$route.query.page || 1\n    }\n  },\n  data() {\n    return {\n      headers: [\n        {text: '#', sortable: false, value: 'idx',},\n        {text: 'Name', sortable: true, value: 'name', width: '100%'},\n        {text: 'Actions', sortable: false, value: 'actions', width: 110, align: 'center'},\n      ],\n      dialogCategory: false,\n      changeItem: {\n        name: '',\n      },\n      slug: null,\n\n      // validation\n      rules: {\n        required: value => !!value || 'This field is required.',\n        min3: v => (v && v.length >= 3) || 'This field must be more than 3 characters',\n      },\n      formHasErrors: true,\n    }\n  },\n  mounted() {\n    this.getCategories(this._queryPage)\n  },\n  methods: {\n    getCategories(page) {\n      this.$store.dispatch('postsCategories/getList', page).catch(err => {\n        this.$store.commit('snackbar/OPEN_SNACKBAR', {\n          type: 'error',\n          text: err\n        })\n      })\n    },\n\n    editItem(item) {\n      this.$store.commit('postsCategories/SET_INDEX', item)\n      this.$store.commit('postsCategories/SET_ITEM', item)\n      this.changeItem = {...this.$store.state.postsCategories.editedItem}\n      this.dialogCategory = true\n    },\n\n    async deleteItem(item) {\n      this.slug = item.slug\n      this.$store.commit('modalConfirm/MODAL_SET_DATA')\n      this.$store.commit('modalConfirm/MODAL_HANDLER', true)\n    },\n\n    async save() {\n      await this.$refs.formCategory.validate()\n      if (this.formHasErrors) await this.submit()\n    },\n\n    async submit() {\n      if (this.$store.state.postsCategories.editedIndex > -1) { // update\n        let fd = getFormData(this.changeItem, true)\n        await this.$store.dispatch('postsCategories/updateItem', fd).then(res => {\n          if (res.data.status === 'ok') {\n            this.$store.commit('snackbar/OPEN_SNACKBAR', {\n              type: 'success',\n              text: 'Category successfully updated'\n            })\n            this.getCategories(this._queryPage)\n          }\n        }).catch(err => {\n          this.$store.commit('snackbar/OPEN_SNACKBAR', {\n            type: 'error',\n            text: err\n          })\n        })\n      } else { // create\n        await this.$store.dispatch('postsCategories/createItem', this.changeItem).then(res => {\n          if (res.data.status === 'ok') {\n            this.$store.commit('snackbar/OPEN_SNACKBAR', {\n              type: 'success',\n              text: 'Category successfully created'\n            })\n            this.getCategories(this._queryPage)\n          }\n        }).catch(err => {\n          this.$store.commit('snackbar/OPEN_SNACKBAR', {\n            type: 'error',\n            text: err\n          })\n        })\n      }\n\n      this.close()\n    },\n\n    close() {\n      this.dialogCategory = false\n      this.$store.commit('postsCategories/RESET_ITEM')\n      this.resetForm()\n    },\n\n    resetForm() {\n      this.formHasErrors = true\n      this.$refs.formCategory.reset()\n    },\n  },\n  watch: {\n    '$store.state.modalConfirm.action': function (next) {\n      if (next) {\n        this.$store.dispatch('postsCategories/deleteItem', this.slug).then(res => {\n          if (res.data.status === 'ok') {\n            this.$store.commit('snackbar/OPEN_SNACKBAR', {\n              type: 'success',\n              text: 'Category successfully deleted'\n            })\n            this.getCategories(this._queryPage)\n          }\n        }).catch(err => {\n          this.$store.commit('snackbar/OPEN_SNACKBAR', {\n            type: 'error',\n            text: err\n          })\n        })\n\n        this.$store.commit('modalConfirm/MODAL_HANDLER', false)\n        this.$store.commit('modalConfirm/MODAL_RESET')\n      }\n    }\n  }\n}\n</script>\n\n<style scoped>\n\n</style>\n","import mod from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/babel-loader/lib/index.js!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./PostsCategories.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/babel-loader/lib/index.js!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./PostsCategories.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./PostsCategories.vue?vue&type=template&id=3688af5d&scoped=true&\"\nimport script from \"./PostsCategories.vue?vue&type=script&lang=js&\"\nexport * from \"./PostsCategories.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"3688af5d\",\n  null\n  \n)\n\nexport default component.exports\n\n/* vuetify-loader */\nimport installComponents from \"!../../../../node_modules/vuetify-loader/lib/runtime/installComponents.js\"\nimport { VBtn } from 'vuetify/lib/components/VBtn';\nimport { VCard } from 'vuetify/lib/components/VCard';\nimport { VCardActions } from 'vuetify/lib/components/VCard';\nimport { VCardText } from 'vuetify/lib/components/VCard';\nimport { VCardTitle } from 'vuetify/lib/components/VCard';\nimport { VDialog } from 'vuetify/lib/components/VDialog';\nimport { VForm } from 'vuetify/lib/components/VForm';\nimport { VSpacer } from 'vuetify/lib/components/VGrid';\nimport { VTextField } from 'vuetify/lib/components/VTextField';\ninstallComponents(component, {VBtn,VCard,VCardActions,VCardText,VCardTitle,VDialog,VForm,VSpacer,VTextField})\n"],"sourceRoot":""}